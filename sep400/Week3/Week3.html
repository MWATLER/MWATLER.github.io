<h1>Week 3 - January 23-27</h1>

  <h3>Introduction</h3>
  <p>This week we will look at calls into the Linux kernel via IOCTL's (Input/Output Control). We will also look at device drivers at the kernel level.</p>

  <h3>Videos</h3>
  <table>
    <tr><td>IOCTLs</td><td><a href="https://www.youtube.com/watch?v=-sigllMLte4" target="_blank">Linux IOCTL's</a></td></tr>
    <tr><td>Linux Device Drivers</td><td><a href="https://www.youtube.com/watch?v=b58CnY7qxpk" target="_blank">Linux Devices and Drivers</a></td></tr>
    <tr><td></td><td><a href="https://www.youtube.com/watch?v=juGNPLdjLH4" target="_blank">How Do Linux Kernel Drivers Work?</a></td></tr>
    <tr><td></td><td><a href="https://www.youtube.com/watch?v=CWihl19mJig" target="_blank">How to build a Linux loadable kernel module that Rickrolls people</a></td></tr>
  </table>
  
  <h3>Quiz</h3>
  <ul>
      <li><b>Quiz 2</b> (January ...)  will be on IOCTL's. Study Chapter 4 (System Programming Concepts) of
      <a href="https://senecacollege.primo.exlibrisgroup.com/permalink/01SENC_INST/17thfn4/alma997359010403226" target="_blank">The Linux Programming Interface</a>.</li>
  </ul>
  
  <h3>Lecture Material</h3>
  <ul>
  <li>Chapter 13 of
      <a href="https://senecacollege.primo.exlibrisgroup.com/permalink/01SENC_INST/iq0dqm/alma997143391103226" target="_blank">Operating System Concepts</a></li>
  <li>IOCTLs - Chapter 4 of
    <a href="https://senecacollege.primo.exlibrisgroup.com/permalink/01SENC_INST/17thfn4/alma997359010403226" target="_blank">The Linux Programming Interface</a></li>
  <li><a href="https://www.linuxjournal.com/article/6908" target="_blank">Controlling Hardware with ioctls</a>.</li>
  <li>Chapters 1, 2 and 3 of <a href="https://senecacollege.primo.exlibrisgroup.com/permalink/01SENC_INST/17thfn4/alma997135787703226" target="_blank">Linux Device Drivers</a>.</li>
</ul>
  
  <h3>Labs</h3>
  <ul>
    <li><a href="../Labs/Lab1/Lab1.html" target="_blank">Lab 1</a> (due January 27) - using a static library.</li>
    <li><a href="../Labs/Lab2/Lab2.html" target="_blank">Lab 2</a> (due February 3) - I/O control: Network Interface.</li>
  </ul>
  
  <h3>Assignment(s)</h3>
  <p>None.</p>
  
  <h3>Sample Code</h3>
  <p><em>IOCTLs</em></p>
  <ul>
    <li>For an introduction to IOCTL's see <a href="https://www.linuxjournal.com/article/6908" target="_blank">Controlling Hardware with ioctls</a>.</li>
    <li>For sample code using IOCTL's see <a href="diskDrive/diskDrive.cpp" target="_blank">diskDrive.cpp</a>. This performs IOCTL's on the
    device driver for two file systems to get sector size, number of head, cylinders etc... Documentation on how to use this IOCTL
    can be found at <a href="https://www.kernel.org/doc/Documentation/ioctl/hdio.txt" target="_blank">Summary of HDIO_ IOCTL calls</a> and
    <a href="https://man7.org/linux/man-pages/man4/sd.4.html" target="_blank">sd - driver for SCSI disk drives</a>.</li>
  </ul>
  
  <p><em>Peripheral Writer</em></p>
  <ul>
    <li>A peripheral writer. A device driver has been written to simulate the control of a peripheral writer. A user level application has been written
    to open, close, write to, read from, and send IOCTL's to this driver. Reference material to parts of the code are embedded within the code.</li>
  <li>The Makefile for the kernel level driver can be found at <a href="peripheralWriter/kernel/Makefile" target="_blank">Makefile</a>.<br>
    The source code for the kernel level driver can be found at <a href="peripheralWriter/kernel/peripheralWriter.h" target="_blank">peripheralWriter.h</a>
    and <a href="peripheralWriter/kernel/peripheralWriter.c" target="_blank">peripheralWriter.c</a>.<br> A macro for inserting the module into the kernel
  can be found at <a href="peripheralWriter/kernel/load.sh" target="_blank">load.sh</a> and a macro for removing the module from the kernel can be found
  at <a href="peripheralWriter/kernel/unload.sh" target="_blank">unload.sh</a>.</li>
  <li>The Makefile for the user level application can be found at <a href="peripheralWriter/user/Makefile" target="_blank">Makefile</a>.<br>
    The source code for the user level application can be found at <a href="peripheralWriter/user/userWriter.cpp" target="_blank">userWriter.cpp</a>.</li>
  </ul>
